<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SCAN MOI / JÉSUS T'AIME</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700&family=Poppins:wght@300;400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <link rel="icon" type="image/jpeg" href="img/logo-trans.jpeg">
</head>
<body>

    <header>
       <div class="logo">
    <a href="index.html">
        <img src="img/logo-trans.jpeg" alt="SCAN MOI - C'est gratuit / JESUS T'AIME Logo" class="logo-img">
    </a>
</div>
        <nav>
            <a href="index.html" class="active">Accueil</a>
            <a href="message.html">Message</a>
            <a href="espoir.html">Espoir</a>
            <a href="ressources.html">Ressources</a>
        </nav>
    </header>

    <main class="accueil-section">
        <div class="accueil-content">
            <p class="cross-icon">✝️</p>
            
            <h1 class="main-title">❤ JÉSUS T'AIME</h1>
            
            <p class="sub-text">
                Parce que ton scan n'est pas un hasard. <br>
                Tu es précieux, tu comptes, et il y a un message pour toi ici.
            </p>

            <blockquote class="bible-quote">
                "Car Dieu a tant aimé le monde qu'il a donné son Fils unique, afin que quiconque croît en lui ne périsse pas, mais qu'il ait la vie éternelle."
                <cite>- Jean 3:16</cite>
            </blockquote>

            <p class="reminder">
                Ce n'est pas une pub. Ce n'est pas un piège. C'est juste un rappel: Tu es aimé, vraiment.
            </p>

            <a href="message.html" class="cta-button">
                DÉCOUVRIR CE MESSAGE →
            </a>
            
        </div>
    </main>

    <footer>
        <p>© 2025 JÉSUS T'AIME - Site bienveillant et sans jugement.</p>
        <a href="#" onclick="showCookieBanner(); return false;" class="cookie-settings-link">Gérer mon consentement</a>
    </footer>

   <div id="cookie-banner" class="cookie-banner" style="display: none;">
    <p>
        Ce site utilise des cookies pour assurer son bon fonctionnement et vous donner accès à toutes ses fonctionnalités (comme le formulaire de contact).
    </p>
    <div class="cookie-actions">
        <button class="refuse-btn" onclick="refuseCookies()">Je refuse</button> 
        <button class="accept-btn" onclick="acceptCookies()">J'accepte</button>
    </div>
</div>

<script>
    const CONSENT_COOKIE_NAME = 'user_has_agreed_cookies';
    const DAYS_TO_KEEP = 365;

    // Fonction utilitaire pour lire un cookie
    function getCookie(name) {
        const value = `; ${document.cookie}`;
        const parts = value.split(`; ${name}=`);
        if (parts.length === 2) return parts.pop().split(';').shift();
    }

    // Fonction pour définir le cookie de consentement (valeur: 'accepted' ou 'refused')
    function setCookie(name, value, days = DAYS_TO_KEEP) {
        const date = new Date();
        date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
        const expires = "; expires=" + date.toUTCString();
        // path=/ assure que le cookie est accessible sur tout le site
        document.cookie = name + "=" + (value || "")  + expires + "; path=/; max-age=" + (days * 24 * 60 * 60);
    }

    // Fonction pour cacher la bannière
    function hideBanner() {
        document.getElementById('cookie-banner').style.display = 'none';
    }

    // Fonction pour afficher la bannière manuellement
function showCookieBanner() {
    document.getElementById('cookie-banner').style.display = 'block';
}

// Fonction pour cacher la bannière (existante)
function hideBanner() {
    document.getElementById('cookie-banner').style.display = 'none';
}
// ... le reste du code JavaScript ...
    
    // CAS 1: L'utilisateur accepte
    function acceptCookies() {
        setCookie(CONSENT_COOKIE_NAME, 'accepted'); 
        hideBanner();
        // Le consentement est enregistré, permettant aux scripts tiers de se charger sur ressources.html
    }

    // CAS 2: L'utilisateur refuse
    function refuseCookies() {
        // Enregistre le refus. Ceci est la clé pour que la bannière ne s'affiche plus.
        setCookie(CONSENT_COOKIE_NAME, 'refused'); 
        hideBanner();
        // Le refus est enregistré. Les scripts tiers (Google Forms) seront bloqués sur ressources.html
    }

    // Vérifie au chargement de la page si le cookie existe
    window.onload = function() {
        const consent = getCookie(CONSENT_COOKIE_NAME);
        
        if (!consent) {
            // Si aucune décision n'a été prise, affiche la bannière
            document.getElementById('cookie-banner').style.display = 'block';
        }
        // Si consent vaut 'accepted' ou 'refused', la bannière reste cachée.
    }
</script>

</body>
</html>